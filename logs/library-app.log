2025-09-28T08:44:57.339+08:00  INFO 14616 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : Starting LibrarySystemApplication using Java 21.0.7 with PID 14616 (E:\ideaTry\LibrarySystem\target\classes started by lenovo in E:\ideaTry\LibrarySystem)
2025-09-28T08:44:57.347+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-09-28T08:44:57.348+08:00  INFO 14616 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : The following 1 profile is active: "dev"
2025-09-28T08:44:59.159+08:00  INFO 14616 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-28T08:44:59.162+08:00  INFO 14616 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-28T08:44:59.198+08:00  INFO 14616 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2025-09-28T08:44:59.315+08:00 DEBUG 14616 --- [LibrarySystem] [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2025-09-28T08:44:59.317+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Ignored because not a concrete top-level class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BalanceNotEnoughError.class]
2025-09-28T08:44:59.318+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BookMapper.class]
2025-09-28T08:44:59.318+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BooksMapper.class]
2025-09-28T08:44:59.318+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BorrowTimeMapper.class]
2025-09-28T08:44:59.318+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ManagerMapper.class]
2025-09-28T08:44:59.318+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\OrdersMapper.class]
2025-09-28T08:44:59.318+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ProcessBookMapper.class]
2025-09-28T08:44:59.320+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\PurchaseBooksMapper.class]
2025-09-28T08:44:59.320+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ScoreMapper.class]
2025-09-28T08:44:59.320+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\UserMapper.class]
2025-09-28T08:44:59.321+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'bookMapper' and 'org.powernode.springboot.mapper.database.BookMapper' mapperInterface
2025-09-28T08:44:59.323+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'bookMapper'.
2025-09-28T08:44:59.323+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'booksMapper' and 'org.powernode.springboot.mapper.database.BooksMapper' mapperInterface
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'booksMapper'.
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'borrowTimeMapper' and 'org.powernode.springboot.mapper.database.BorrowTimeMapper' mapperInterface
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'borrowTimeMapper'.
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'managerMapper' and 'org.powernode.springboot.mapper.database.ManagerMapper' mapperInterface
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'managerMapper'.
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'ordersMapper' and 'org.powernode.springboot.mapper.database.OrdersMapper' mapperInterface
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'ordersMapper'.
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'processBookMapper' and 'org.powernode.springboot.mapper.database.ProcessBookMapper' mapperInterface
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'processBookMapper'.
2025-09-28T08:44:59.324+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'purchaseBooksMapper' and 'org.powernode.springboot.mapper.database.PurchaseBooksMapper' mapperInterface
2025-09-28T08:44:59.325+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'purchaseBooksMapper'.
2025-09-28T08:44:59.325+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'scoreMapper' and 'org.powernode.springboot.mapper.database.ScoreMapper' mapperInterface
2025-09-28T08:44:59.325+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'scoreMapper'.
2025-09-28T08:44:59.325+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'org.powernode.springboot.mapper.database.UserMapper' mapperInterface
2025-09-28T08:44:59.325+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'userMapper'.
2025-09-28T08:45:00.119+08:00  INFO 14616 --- [LibrarySystem] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-09-28T08:45:00.138+08:00  INFO 14616 --- [LibrarySystem] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-28T08:45:00.138+08:00  INFO 14616 --- [LibrarySystem] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-09-28T08:45:00.189+08:00  INFO 14616 --- [LibrarySystem] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-28T08:45:00.190+08:00  INFO 14616 --- [LibrarySystem] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2780 ms
2025-09-28T08:45:00.249+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.powernode.springboot.fliter.JwtFilter  : Filter 'jwtFilter' configured for use
2025-09-28T08:45:00.582+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BookMapper.xml]'
2025-09-28T08:45:00.621+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BooksMapper.xml]'
2025-09-28T08:45:00.670+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BorrowTimeMapper.xml]'
2025-09-28T08:45:00.736+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ManagerMapper.xml]'
2025-09-28T08:45:00.760+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\OrdersMapper.xml]'
2025-09-28T08:45:00.781+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ProcessBookMapper.xml]'
2025-09-28T08:45:00.787+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\PurchaseBooksMapper.xml]'
2025-09-28T08:45:00.795+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ScoreMapper.xml]'
2025-09-28T08:45:00.841+08:00 DEBUG 14616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\UserMapper.xml]'
2025-09-28T08:45:01.402+08:00  WARN 14616 --- [LibrarySystem] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d4bec796-b643-4e9a-ae77-05cac1d6f6f9

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-28T08:45:01.410+08:00  INFO 14616 --- [LibrarySystem] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-28T08:45:02.303+08:00  INFO 14616 --- [LibrarySystem] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-09-28T08:45:02.312+08:00  INFO 14616 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : Started LibrarySystemApplication in 5.699 seconds (process running for 6.689)
2025-09-28T08:45:06.089+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-28T08:45:06.089+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-28T08:45:06.090+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-28T08:54:36.793+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkPassword()
2025-09-28T08:54:36.795+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 管理员1正在登录中
2025-09-28T08:54:36.799+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [org.powernode.springboot.service.database.service.impl.ManagerServiceImpl.checkPassword]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-09-28T08:54:36.801+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-28T08:54:37.307+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4a32851
2025-09-28T08:54:37.309+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-28T08:54:37.312+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@182542519 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851] for JDBC transaction
2025-09-28T08:54:37.316+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@182542519 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851] to manual commit
2025-09-28T08:54:37.317+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.s.d.s.impl.ManagerServiceImpl      : 执行开始: ManagerServiceImpl.checkPassword()
2025-09-28T08:54:37.324+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-09-28T08:54:37.333+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd116ed]
2025-09-28T08:54:37.343+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@182542519 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851] will be managed by Spring
2025-09-28T08:54:37.348+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.m.d.ManagerMapper.hasManager       : ==>  Preparing: select count(*) from manager where id=?
2025-09-28T08:54:37.373+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.m.d.ManagerMapper.hasManager       : ==> Parameters: 1(Long)
2025-09-28T08:54:37.406+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.m.d.ManagerMapper.hasManager       : <==      Total: 1
2025-09-28T08:54:37.410+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd116ed]
2025-09-28T08:54:37.411+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd116ed] from current transaction
2025-09-28T08:54:37.411+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.m.d.ManagerMapper.selectPassword   : ==>  Preparing: select password from manager where id=?
2025-09-28T08:54:37.411+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.m.d.ManagerMapper.selectPassword   : ==> Parameters: 1(Long)
2025-09-28T08:54:37.414+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.m.d.ManagerMapper.selectPassword   : <==      Total: 1
2025-09-28T08:54:37.414+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd116ed]
2025-09-28T08:54:37.414+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.s.d.s.impl.ManagerServiceImpl      : 执行成功: ManagerServiceImpl.checkPassword() - 耗时: 96ms
2025-09-28T08:54:37.414+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd116ed]
2025-09-28T08:54:37.415+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd116ed]
2025-09-28T08:54:37.415+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd116ed]
2025-09-28T08:54:37.415+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-09-28T08:54:37.415+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@182542519 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851]
2025-09-28T08:54:37.418+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@182542519 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851] after transaction
2025-09-28T08:54:37.471+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 管理员1登录成功
2025-09-28T08:54:37.473+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkPassword() - 耗时: 678ms
2025-09-28T08:54:37.539+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T08:54:37.540+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T08:54:37.543+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 3ms
2025-09-28T08:54:42.818+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T08:54:42.818+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T08:54:42.820+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 2ms
2025-09-28T08:54:46.861+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T08:54:46.861+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T08:54:46.863+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 2ms
2025-09-28T08:54:52.280+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T08:54:52.282+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T08:54:52.282+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 0ms
2025-09-28T08:54:52.298+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T08:54:52.300+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T08:54:52.300+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T08:54:52.300+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.w.i.AuthHandshakeInterceptor       : id为1，设备为pc，token为pc，权限为manager的管理员成功加入会话,是此管理员这次连接的第一个连接者
2025-09-28T08:54:52.357+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNDk2OTIyODIsImV4cCI6MTc1OTAyMTM3MiwianRpIjoiYzVlNTI0MzgtMzVlNy00ZjViLTgzNDYtYTE0OTExYjczMGNhIiwic3ViIjoiMSJ9.UbZR4PmRH9XJsHpNwgfDsh0TJzsyFpxyAhB15rrxIcw，设备是pc,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T08:54:52.380+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T08:54:52.381+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用pc建立连接，session编号是071a67cc-8a83-ac0b-645f-bd161cd3c246
2025-09-28T08:55:20.070+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T08:55:20.073+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T08:55:20.074+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T08:55:20.074+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T08:55:20.076+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNDk2OTIyODIsImV4cCI6MTc1OTAyMTM3MiwianRpIjoiYzVlNTI0MzgtMzVlNy00ZjViLTgzNDYtYTE0OTExYjczMGNhIiwic3ViIjoiMSJ9.UbZR4PmRH9XJsHpNwgfDsh0TJzsyFpxyAhB15rrxIcw，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T08:55:20.076+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T08:55:20.077+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T08:55:20.077+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是5cb1e9ce-a1ee-1db3-0cd3-014b1a16a6f6
2025-09-28T08:55:52.182+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T08:55:52.209+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T08:55:52.210+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 服务器讲编号为1的管理员的手机端改变状态以成功扫描用户的付款码，进行充值
2025-09-28T08:57:57.875+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T08:57:58.210+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的pc设备已断开连接
2025-09-28T08:57:59.539+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T08:57:59.539+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T08:57:59.541+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 2ms
2025-09-28T08:57:59.687+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T08:57:59.688+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T08:57:59.689+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T08:58:26.103+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T08:58:26.104+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T08:58:26.104+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 0ms
2025-09-28T08:58:26.110+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T08:58:26.111+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T08:58:26.111+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T08:58:26.111+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : id为1，设备为pc，token为pc，权限为manager的管理员成功加入会话,是此管理员这次连接的第一个连接者
2025-09-28T08:58:26.113+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNDk5MDYxMDQsImV4cCI6MTc1OTAyMTU4NiwianRpIjoiYmQ0MjM4ZWMtY2UxYy00ZTRlLWI3ZDQtZGEyOTYwZGI4OTljIiwic3ViIjoiMSJ9.b1xUMKVYXUrUAIGZZA7yQBXUy3zVcUmmVvYBui1tfyE，设备是pc,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T08:58:26.114+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T08:58:26.114+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用pc建立连接，session编号是19de7a1f-3fb8-eba9-503f-471f5d1ff107
2025-09-28T08:58:58.705+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T08:58:58.709+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T08:58:58.710+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T08:58:58.710+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T08:58:58.712+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNDk5MDYxMDQsImV4cCI6MTc1OTAyMTU4NiwianRpIjoiYmQ0MjM4ZWMtY2UxYy00ZTRlLWI3ZDQtZGEyOTYwZGI4OTljIiwic3ViIjoiMSJ9.b1xUMKVYXUrUAIGZZA7yQBXUy3zVcUmmVvYBui1tfyE，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T08:58:58.713+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T08:58:58.714+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T08:58:58.714+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是897b9d23-4afb-0e36-81f4-2bbfef6a60a7
2025-09-28T08:59:17.780+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T08:59:17.781+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T08:59:17.782+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : 服务器讲编号为1的管理员的手机端改变状态以成功扫描用户的付款码，进行充值
2025-09-28T09:00:43.977+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : 1的phone发来信息
2025-09-28T09:00:43.978+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在phone端发起停止连接请求
2025-09-28T09:00:43.978+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员的phone客户端关闭连接，状态码为3
2025-09-28T09:00:43.979+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员，令服务器给pc端发送信息：1管理员的phone客户端已正常断开连接，关闭所有当前连接中的设备
2025-09-28T09:00:43.980+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:00:43.980+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的pc设备已断开连接
2025-09-28T09:00:43.984+08:00 ERROR 14616 --- [LibrarySystem] [http-nio-8080-exec-2] w.s.h.ExceptionWebSocketHandlerDecorator : Closing session due to exception for StandardWebSocketSession[id=897b9d23-4afb-0e36-81f4-2bbfef6a60a7, uri=ws://localhost:8080/manager/connect?connectToken=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNDk5MDYxMDQsImV4cCI6MTc1OTAyMTU4NiwianRpIjoiYmQ0MjM4ZWMtY2UxYy00ZTRlLWI3ZDQtZGEyOTYwZGI4OTljIiwic3ViIjoiMSJ9.b1xUMKVYXUrUAIGZZA7yQBXUy3zVcUmmVvYBui1tfyE&device=phone]

java.util.ConcurrentModificationException: null
	at java.base/java.util.HashMap$HashIterator.nextNode(HashMap.java:1605) ~[na:na]
	at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:1638) ~[na:na]
	at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:1636) ~[na:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.closeAllSession(ManagerWebSocketHandler.java:196) ~[classes/:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.handleMessage(ManagerWebSocketHandler.java:120) ~[classes/:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.handleTextMessage(ManagerWebSocketHandler.java:102) ~[classes/:na]
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-09-28T09:00:43.993+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T09:00:58.054+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T09:00:58.054+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T09:00:58.054+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 0ms
2025-09-28T09:00:58.059+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T09:00:58.060+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:00:58.060+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:00:58.060+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : id为1，设备为pc，token为pc，权限为manager的管理员成功加入会话,是此管理员这次连接的第一个连接者
2025-09-28T09:00:58.063+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTAwNTgwNTQsImV4cCI6MTc1OTAyMTczOCwianRpIjoiODdkOTg0Y2EtMDVkMC00YWQwLTkzNDYtOWRiMzVjMzI5MzIwIiwic3ViIjoiMSJ9.IPRipX9sOghA4Ds6D5onZUziFOO6SfmMDFxEt-1Jt0s，设备是pc,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:00:58.063+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:00:58.064+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用pc建立连接，session编号是8a116131-457f-9e54-3bd6-5673ac7a52fa
2025-09-28T09:01:17.133+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T09:01:17.135+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:01:17.135+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:01:17.135+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T09:01:17.138+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTAwNTgwNTQsImV4cCI6MTc1OTAyMTczOCwianRpIjoiODdkOTg0Y2EtMDVkMC00YWQwLTkzNDYtOWRiMzVjMzI5MzIwIiwic3ViIjoiMSJ9.IPRipX9sOghA4Ds6D5onZUziFOO6SfmMDFxEt-1Jt0s，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:01:17.138+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:01:17.138+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:01:17.139+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是90a1721f-099b-d7a0-0e9a-dd1114dac7cd
2025-09-28T09:01:49.390+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:01:49.392+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:01:49.393+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : 服务器讲编号为1的管理员的手机端改变状态以成功扫描用户的付款码，进行充值
2025-09-28T09:02:03.803+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 执行开始: ManagerController.getAllBookRecord()
2025-09-28T09:02:03.803+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : ?
2025-09-28T09:02:03.805+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [org.powernode.springboot.service.database.service.impl.BookServiceImpl.selectAllBook]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-09-28T09:02:03.805+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1555399863 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851] for JDBC transaction
2025-09-28T09:02:03.805+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1555399863 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851] to manual commit
2025-09-28T09:02:03.806+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.s.d.service.impl.BookServiceImpl   : 执行开始: BookServiceImpl.selectAllBook()
2025-09-28T09:02:03.808+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-09-28T09:02:03.808+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d357312]
2025-09-28T09:02:03.834+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1555399863 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851] will be managed by Spring
2025-09-28T09:02:03.834+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.m.d.B.selectAllBookRecord          : ==>  Preparing: select a.id as id, a.book_id as book_id, a.user_id as user_id, a.manager_id1 as manager_id1, a.manager_id2 as manager_id2, a.time as time, a.expected_return_time as expected_return_time, a.return_time as return_time, a.restitution as restitution, a.deposit as deposit, b.name as name, b.author as author, a.renew_time as renew_time, c.id as order_id from book a left join books b on a.book_id=b.id left join orders c on a.order_id=c.id WHERE a.book_id=?
2025-09-28T09:02:03.836+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.m.d.B.selectAllBookRecord          : ==> Parameters: 3(Long)
2025-09-28T09:02:03.913+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.m.d.B.selectAllBookRecord          : <==      Total: 0
2025-09-28T09:02:03.914+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d357312]
2025-09-28T09:02:03.914+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.s.d.service.impl.BookServiceImpl   : 执行成功: BookServiceImpl.selectAllBook() - 耗时: 108ms
2025-09-28T09:02:03.914+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d357312]
2025-09-28T09:02:03.914+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d357312]
2025-09-28T09:02:03.914+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d357312]
2025-09-28T09:02:03.914+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-09-28T09:02:03.914+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1555399863 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851]
2025-09-28T09:02:03.915+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1555399863 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a32851] after transaction
2025-09-28T09:02:03.916+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 执行成功: ManagerController.getAllBookRecord() - 耗时: 113ms
2025-09-28T09:03:36.383+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:03:36.383+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:03:36.384+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:03:46.183+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 1的phone发来信息
2025-09-28T09:03:46.183+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在phone端发送了扫描到的付款吗信息，检测是否合法,当前应对的使用户开通借阅服务功能
2025-09-28T09:03:46.183+08:00 ERROR 14616 --- [LibrarySystem] [http-nio-8080-exec-6] w.s.h.ExceptionWebSocketHandlerDecorator : Closing session due to exception for StandardWebSocketSession[id=90a1721f-099b-d7a0-0e9a-dd1114dac7cd, uri=ws://localhost:8080/manager/connect?connectToken=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTAwNTgwNTQsImV4cCI6MTc1OTAyMTczOCwianRpIjoiODdkOTg0Y2EtMDVkMC00YWQwLTkzNDYtOWRiMzVjMzI5MzIwIiwic3ViIjoiMSJ9.IPRipX9sOghA4Ds6D5onZUziFOO6SfmMDFxEt-1Jt0s&device=phone]

java.lang.IllegalArgumentException: JWT String argument cannot be null or empty.
	at io.jsonwebtoken.lang.Assert.hasText(Assert.java:135) ~[jjwt-0.9.1.jar:0.9.1]
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:479) ~[jjwt-0.9.1.jar:0.9.1]
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:541) ~[jjwt-0.9.1.jar:0.9.1]
	at org.powernode.springboot.tool.JwtTool.checkJwt(JwtTool.java:158) ~[classes/:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.treatActivateService(ManagerWebSocketHandler.java:238) ~[classes/:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.handleMessage(ManagerWebSocketHandler.java:126) ~[classes/:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.handleTextMessage(ManagerWebSocketHandler.java:102) ~[classes/:na]
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-09-28T09:03:46.184+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T09:03:46.545+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.controller.UserController          : 执行开始: UserController.getPayQrToken()
2025-09-28T09:03:46.545+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.controller.UserController          : 编号为3的用户请求获取他的支付码，支付金额为5.0元
2025-09-28T09:03:46.550+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.controller.UserController          : 执行成功: UserController.getPayQrToken() - 耗时: 5ms
2025-09-28T09:04:53.605+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T09:04:53.607+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:04:53.607+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:04:53.608+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T09:04:53.612+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTAwNTgwNTQsImV4cCI6MTc1OTAyMTczOCwianRpIjoiODdkOTg0Y2EtMDVkMC00YWQwLTkzNDYtOWRiMzVjMzI5MzIwIiwic3ViIjoiMSJ9.IPRipX9sOghA4Ds6D5onZUziFOO6SfmMDFxEt-1Jt0s，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:04:53.613+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:04:53.616+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:04:53.617+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是efbffe2a-b50e-c69a-60cc-7d66620b3f6b
2025-09-28T09:05:03.372+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:05:03.373+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:05:03.373+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : 服务器讲编号为1的管理员的手机端改变状态以成功扫描用户的付款码，进行充值
2025-09-28T09:05:10.873+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:05:10.873+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:05:10.874+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:05:40.528+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.UserController          : 执行开始: UserController.getPayQrToken()
2025-09-28T09:05:40.529+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.UserController          : 编号为3的用户请求获取他的支付码，支付金额为5.0元
2025-09-28T09:05:40.529+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.UserController          : 执行成功: UserController.getPayQrToken() - 耗时: 0ms
2025-09-28T09:05:55.125+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 1的phone发来信息
2025-09-28T09:05:55.125+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在phone端发送了扫描到的付款吗信息，检测是否合法,当前应对的使用户开通借阅服务功能
2025-09-28T09:05:55.127+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员正在处理来自编号为3用户的目的为开通借阅服务，金额大小为5.0的订单
2025-09-28T09:05:55.127+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在处理来自编号为3用户的目的为充值服务，金额大小为5.0的订单时，发现其开通服务的类型存在异常
2025-09-28T09:08:34.826+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:08:34.828+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:08:34.829+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:08:39.263+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T09:08:39.924+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:08:39.924+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:08:39.925+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:08:41.104+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:08:41.104+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:08:41.105+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:10:22.575+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:10:22.576+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在pc端发起停止连接请求
2025-09-28T09:10:22.576+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员的pc客户端关闭连接，状态码为3
2025-09-28T09:10:22.576+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员，令服务器给pc端发送信息：1管理员的pc客户端已正常断开连接，关闭所有当前连接中的设备
2025-09-28T09:10:22.577+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:10:22.577+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的pc设备已断开连接
2025-09-28T09:13:51.606+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T09:13:51.606+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T09:13:51.606+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 0ms
2025-09-28T09:13:51.611+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T09:13:51.612+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:13:51.612+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:13:51.612+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : id为1，设备为pc，token为pc，权限为manager的管理员成功加入会话,是此管理员这次连接的第一个连接者
2025-09-28T09:13:51.615+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTA4MzE2MDYsImV4cCI6MTc1OTAyMjUxMSwianRpIjoiMzE5NzdmYzUtZTFhYy00ZmZmLTkyNjYtOWQ4Y2NiNzNiODdlIiwic3ViIjoiMSJ9.oqPMB8WLD2tiXc_PgrW0_2wVY6pnt-GN0ACTWoV4JrQ，设备是pc,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:13:51.616+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:13:51.616+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用pc建立连接，session编号是587dc516-e208-3b84-91bf-661addb1b963
2025-09-28T09:14:22.794+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:14:22.795+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在pc端发起停止连接请求
2025-09-28T09:14:22.795+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员的pc客户端关闭连接，状态码为3
2025-09-28T09:14:22.795+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员，令服务器给pc端发送信息：1管理员的pc客户端已正常断开连接，关闭所有当前连接中的设备
2025-09-28T09:14:22.796+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:14:22.796+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的pc设备已断开连接
2025-09-28T09:17:39.697+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T09:17:39.699+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T09:17:39.699+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 0ms
2025-09-28T09:17:39.705+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T09:17:39.706+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:17:39.706+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:17:39.706+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.i.AuthHandshakeInterceptor       : id为1，设备为pc，token为pc，权限为manager的管理员成功加入会话,是此管理员这次连接的第一个连接者
2025-09-28T09:17:39.710+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTEwNTk2OTksImV4cCI6MTc1OTAyMjczOSwianRpIjoiYzM3NWZhOWEtYjJkNy00OTlkLTljZTktMDkxZTZjYzg4Yzg3Iiwic3ViIjoiMSJ9.S0x3JwRe1gtlDa8UB6l2guzYgBQeFcL2dLK6b-KrM1E，设备是pc,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:17:39.710+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:17:39.710+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用pc建立连接，session编号是a4e4c41d-1bcb-12c9-60c9-90de6d8d3948
2025-09-28T09:18:21.270+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T09:18:21.271+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:18:21.271+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:18:21.272+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T09:18:21.274+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTEwNTk2OTksImV4cCI6MTc1OTAyMjczOSwianRpIjoiYzM3NWZhOWEtYjJkNy00OTlkLTljZTktMDkxZTZjYzg4Yzg3Iiwic3ViIjoiMSJ9.S0x3JwRe1gtlDa8UB6l2guzYgBQeFcL2dLK6b-KrM1E，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:18:21.274+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:18:21.274+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:18:21.274+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是d010e70e-8ba1-cbf3-8d72-80a4701bd954
2025-09-28T09:18:33.307+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:18:33.308+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:18:33.308+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : 服务器讲编号为1的管理员的手机端改变状态以成功扫描用户的付款码，进行充值
2025-09-28T09:18:45.112+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T09:18:45.800+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:18:45.800+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:18:45.801+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:18:57.729+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T09:18:57.731+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:18:57.731+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:18:57.731+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T09:18:57.734+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTEwNTk2OTksImV4cCI6MTc1OTAyMjczOSwianRpIjoiYzM3NWZhOWEtYjJkNy00OTlkLTljZTktMDkxZTZjYzg4Yzg3Iiwic3ViIjoiMSJ9.S0x3JwRe1gtlDa8UB6l2guzYgBQeFcL2dLK6b-KrM1E，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:18:57.736+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:18:57.736+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:18:57.736+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是481f6d62-f821-6830-be7c-1a3ecef08c21
2025-09-28T09:19:05.794+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T09:19:06.348+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:19:06.348+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:19:06.349+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:19:22.466+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T09:19:22.468+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:19:22.469+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:19:22.469+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T09:19:22.472+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTEwNTk2OTksImV4cCI6MTc1OTAyMjczOSwianRpIjoiYzM3NWZhOWEtYjJkNy00OTlkLTljZTktMDkxZTZjYzg4Yzg3Iiwic3ViIjoiMSJ9.S0x3JwRe1gtlDa8UB6l2guzYgBQeFcL2dLK6b-KrM1E，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:19:22.473+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:19:22.473+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:19:22.473+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是6882a095-f0e5-c130-a6e2-17a84a21d8e6
2025-09-28T09:20:42.370+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:20:42.371+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:20:42.371+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:20:44.176+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T09:20:44.772+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:20:44.772+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:20:44.774+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 2ms
2025-09-28T09:21:01.276+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T09:21:01.276+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T09:21:01.277+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 1ms
2025-09-28T09:21:01.281+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T09:21:01.281+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:21:01.282+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:21:01.282+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token不相同
2025-09-28T09:21:04.959+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:21:04.959+08:00  INFO 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:21:04.960+08:00 DEBUG 14616 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:21:08.253+08:00  INFO 14616 --- [LibrarySystem] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-28T09:21:08.259+08:00  INFO 14616 --- [LibrarySystem] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-28T09:21:08.278+08:00  INFO 14616 --- [LibrarySystem] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-28T09:21:08.283+08:00  INFO 14616 --- [LibrarySystem] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-28T09:21:08.285+08:00  INFO 14616 --- [LibrarySystem] [SpringApplicationShutdownHook] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的pc设备已断开连接
2025-09-28T09:21:15.979+08:00  INFO 28076 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : Starting LibrarySystemApplication using Java 21.0.7 with PID 28076 (E:\ideaTry\LibrarySystem\target\classes started by lenovo in E:\ideaTry\LibrarySystem)
2025-09-28T09:21:15.982+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-09-28T09:21:15.983+08:00  INFO 28076 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : The following 1 profile is active: "dev"
2025-09-28T09:21:16.737+08:00  INFO 28076 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-28T09:21:16.738+08:00  INFO 28076 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-28T09:21:16.773+08:00  INFO 28076 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
2025-09-28T09:21:16.869+08:00 DEBUG 28076 --- [LibrarySystem] [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2025-09-28T09:21:16.872+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Ignored because not a concrete top-level class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BalanceNotEnoughError.class]
2025-09-28T09:21:16.872+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BookMapper.class]
2025-09-28T09:21:16.872+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BooksMapper.class]
2025-09-28T09:21:16.872+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BorrowTimeMapper.class]
2025-09-28T09:21:16.872+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ManagerMapper.class]
2025-09-28T09:21:16.872+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\OrdersMapper.class]
2025-09-28T09:21:16.872+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ProcessBookMapper.class]
2025-09-28T09:21:16.872+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\PurchaseBooksMapper.class]
2025-09-28T09:21:16.872+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ScoreMapper.class]
2025-09-28T09:21:16.873+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\UserMapper.class]
2025-09-28T09:21:16.873+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'bookMapper' and 'org.powernode.springboot.mapper.database.BookMapper' mapperInterface
2025-09-28T09:21:16.874+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'bookMapper'.
2025-09-28T09:21:16.874+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'booksMapper' and 'org.powernode.springboot.mapper.database.BooksMapper' mapperInterface
2025-09-28T09:21:16.875+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'booksMapper'.
2025-09-28T09:21:16.875+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'borrowTimeMapper' and 'org.powernode.springboot.mapper.database.BorrowTimeMapper' mapperInterface
2025-09-28T09:21:16.875+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'borrowTimeMapper'.
2025-09-28T09:21:16.875+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'managerMapper' and 'org.powernode.springboot.mapper.database.ManagerMapper' mapperInterface
2025-09-28T09:21:16.876+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'managerMapper'.
2025-09-28T09:21:16.876+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'ordersMapper' and 'org.powernode.springboot.mapper.database.OrdersMapper' mapperInterface
2025-09-28T09:21:16.876+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'ordersMapper'.
2025-09-28T09:21:16.876+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'processBookMapper' and 'org.powernode.springboot.mapper.database.ProcessBookMapper' mapperInterface
2025-09-28T09:21:16.876+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'processBookMapper'.
2025-09-28T09:21:16.876+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'purchaseBooksMapper' and 'org.powernode.springboot.mapper.database.PurchaseBooksMapper' mapperInterface
2025-09-28T09:21:16.877+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'purchaseBooksMapper'.
2025-09-28T09:21:16.877+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'scoreMapper' and 'org.powernode.springboot.mapper.database.ScoreMapper' mapperInterface
2025-09-28T09:21:16.877+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'scoreMapper'.
2025-09-28T09:21:16.877+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'org.powernode.springboot.mapper.database.UserMapper' mapperInterface
2025-09-28T09:21:16.877+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'userMapper'.
2025-09-28T09:21:17.422+08:00  INFO 28076 --- [LibrarySystem] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-09-28T09:21:17.436+08:00  INFO 28076 --- [LibrarySystem] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-28T09:21:17.436+08:00  INFO 28076 --- [LibrarySystem] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-09-28T09:21:17.490+08:00  INFO 28076 --- [LibrarySystem] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-28T09:21:17.491+08:00  INFO 28076 --- [LibrarySystem] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1453 ms
2025-09-28T09:21:17.550+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.powernode.springboot.fliter.JwtFilter  : Filter 'jwtFilter' configured for use
2025-09-28T09:21:17.775+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BookMapper.xml]'
2025-09-28T09:21:17.788+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BooksMapper.xml]'
2025-09-28T09:21:17.796+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BorrowTimeMapper.xml]'
2025-09-28T09:21:17.804+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ManagerMapper.xml]'
2025-09-28T09:21:17.814+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\OrdersMapper.xml]'
2025-09-28T09:21:17.824+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ProcessBookMapper.xml]'
2025-09-28T09:21:17.828+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\PurchaseBooksMapper.xml]'
2025-09-28T09:21:17.833+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ScoreMapper.xml]'
2025-09-28T09:21:17.841+08:00 DEBUG 28076 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\UserMapper.xml]'
2025-09-28T09:21:18.326+08:00  WARN 28076 --- [LibrarySystem] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 636b04a6-dfab-4d40-ae65-bc74429884b2

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-28T09:21:18.334+08:00  INFO 28076 --- [LibrarySystem] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-28T09:21:19.137+08:00  INFO 28076 --- [LibrarySystem] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-09-28T09:21:19.145+08:00  INFO 28076 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : Started LibrarySystemApplication in 3.718 seconds (process running for 4.388)
2025-09-28T09:21:23.019+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-28T09:21:23.020+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-28T09:21:23.020+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-09-28T09:21:23.131+08:00 DEBUG 28076 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T09:21:23.133+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T09:21:23.158+08:00 DEBUG 28076 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 25ms
2025-09-28T09:21:23.173+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T09:21:23.175+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:21:23.175+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:21:23.175+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : id为1，设备为pc，token为pc，权限为manager的管理员成功加入会话,是此管理员这次连接的第一个连接者
2025-09-28T09:21:23.215+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTEyODMxMzMsImV4cCI6MTc1OTAyMjk2MywianRpIjoiMDg0ZWRlMTItYzQ5Ny00NWE0LWE1OGItMDUwY2RjMTVhYjZiIiwic3ViIjoiMSJ9.SWghYpfwrHn-vI7ZV5xNsKIUfInP9mv_LBMDiPU_CrY，设备是pc,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:21:23.230+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:21:23.230+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用pc建立连接，session编号是b9434e9a-a491-c593-fe0d-29993970499d
2025-09-28T09:21:48.640+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T09:21:48.643+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:21:48.643+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:21:48.643+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T09:21:48.650+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTEyODMxMzMsImV4cCI6MTc1OTAyMjk2MywianRpIjoiMDg0ZWRlMTItYzQ5Ny00NWE0LWE1OGItMDUwY2RjMTVhYjZiIiwic3ViIjoiMSJ9.SWghYpfwrHn-vI7ZV5xNsKIUfInP9mv_LBMDiPU_CrY，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:21:48.651+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:21:48.652+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:21:48.653+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是e136cc4c-ae92-213d-4ad0-4dbdd21eecee
2025-09-28T09:22:02.865+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:22:02.900+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:22:02.900+08:00  INFO 28076 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : 服务器讲编号为1的管理员的手机端改变状态以成功扫描用户的付款码，进行充值
2025-09-28T09:23:04.430+08:00  INFO 28076 --- [LibrarySystem] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-28T09:23:04.446+08:00  INFO 28076 --- [LibrarySystem] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-28T09:23:04.510+08:00  INFO 28076 --- [LibrarySystem] [SpringApplicationShutdownHook] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T09:23:04.511+08:00  INFO 28076 --- [LibrarySystem] [SpringApplicationShutdownHook] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的pc设备已断开连接
2025-09-28T09:23:09.420+08:00  INFO 31632 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : Starting LibrarySystemApplication using Java 21.0.7 with PID 31632 (E:\ideaTry\LibrarySystem\target\classes started by lenovo in E:\ideaTry\LibrarySystem)
2025-09-28T09:23:09.421+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-09-28T09:23:09.422+08:00  INFO 31632 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : The following 1 profile is active: "dev"
2025-09-28T09:23:10.123+08:00  INFO 31632 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-28T09:23:10.127+08:00  INFO 31632 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-28T09:23:10.174+08:00  INFO 31632 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
2025-09-28T09:23:10.341+08:00 DEBUG 31632 --- [LibrarySystem] [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2025-09-28T09:23:10.346+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Ignored because not a concrete top-level class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BalanceNotEnoughError.class]
2025-09-28T09:23:10.347+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BookMapper.class]
2025-09-28T09:23:10.347+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BooksMapper.class]
2025-09-28T09:23:10.347+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BorrowTimeMapper.class]
2025-09-28T09:23:10.347+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ManagerMapper.class]
2025-09-28T09:23:10.347+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\OrdersMapper.class]
2025-09-28T09:23:10.347+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ProcessBookMapper.class]
2025-09-28T09:23:10.348+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\PurchaseBooksMapper.class]
2025-09-28T09:23:10.348+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ScoreMapper.class]
2025-09-28T09:23:10.348+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\UserMapper.class]
2025-09-28T09:23:10.350+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'bookMapper' and 'org.powernode.springboot.mapper.database.BookMapper' mapperInterface
2025-09-28T09:23:10.352+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'bookMapper'.
2025-09-28T09:23:10.352+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'booksMapper' and 'org.powernode.springboot.mapper.database.BooksMapper' mapperInterface
2025-09-28T09:23:10.358+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'booksMapper'.
2025-09-28T09:23:10.358+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'borrowTimeMapper' and 'org.powernode.springboot.mapper.database.BorrowTimeMapper' mapperInterface
2025-09-28T09:23:10.359+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'borrowTimeMapper'.
2025-09-28T09:23:10.359+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'managerMapper' and 'org.powernode.springboot.mapper.database.ManagerMapper' mapperInterface
2025-09-28T09:23:10.359+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'managerMapper'.
2025-09-28T09:23:10.359+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'ordersMapper' and 'org.powernode.springboot.mapper.database.OrdersMapper' mapperInterface
2025-09-28T09:23:10.360+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'ordersMapper'.
2025-09-28T09:23:10.360+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'processBookMapper' and 'org.powernode.springboot.mapper.database.ProcessBookMapper' mapperInterface
2025-09-28T09:23:10.360+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'processBookMapper'.
2025-09-28T09:23:10.361+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'purchaseBooksMapper' and 'org.powernode.springboot.mapper.database.PurchaseBooksMapper' mapperInterface
2025-09-28T09:23:10.361+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'purchaseBooksMapper'.
2025-09-28T09:23:10.361+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'scoreMapper' and 'org.powernode.springboot.mapper.database.ScoreMapper' mapperInterface
2025-09-28T09:23:10.361+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'scoreMapper'.
2025-09-28T09:23:10.362+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'org.powernode.springboot.mapper.database.UserMapper' mapperInterface
2025-09-28T09:23:10.363+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'userMapper'.
2025-09-28T09:23:11.048+08:00  INFO 31632 --- [LibrarySystem] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-09-28T09:23:11.060+08:00  INFO 31632 --- [LibrarySystem] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-28T09:23:11.060+08:00  INFO 31632 --- [LibrarySystem] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-09-28T09:23:11.105+08:00  INFO 31632 --- [LibrarySystem] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-28T09:23:11.105+08:00  INFO 31632 --- [LibrarySystem] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1641 ms
2025-09-28T09:23:11.156+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.powernode.springboot.fliter.JwtFilter  : Filter 'jwtFilter' configured for use
2025-09-28T09:23:11.436+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BookMapper.xml]'
2025-09-28T09:23:11.447+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BooksMapper.xml]'
2025-09-28T09:23:11.456+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BorrowTimeMapper.xml]'
2025-09-28T09:23:11.465+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ManagerMapper.xml]'
2025-09-28T09:23:11.474+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\OrdersMapper.xml]'
2025-09-28T09:23:11.480+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ProcessBookMapper.xml]'
2025-09-28T09:23:11.491+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\PurchaseBooksMapper.xml]'
2025-09-28T09:23:11.498+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ScoreMapper.xml]'
2025-09-28T09:23:11.510+08:00 DEBUG 31632 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\UserMapper.xml]'
2025-09-28T09:23:12.030+08:00  WARN 31632 --- [LibrarySystem] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 96967b38-a060-42f1-a966-a1a2f6d1b705

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-28T09:23:12.037+08:00  INFO 31632 --- [LibrarySystem] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-28T09:23:12.966+08:00  INFO 31632 --- [LibrarySystem] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-09-28T09:23:12.976+08:00  INFO 31632 --- [LibrarySystem] [main] o.p.springboot.LibrarySystemApplication  : Started LibrarySystemApplication in 4.028 seconds (process running for 6.016)
2025-09-28T09:23:14.200+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-28T09:23:14.201+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-28T09:23:14.202+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-28T09:23:14.388+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:23:14.390+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:23:14.394+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 4ms
2025-09-28T09:23:16.140+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:23:16.140+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:23:16.142+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 2ms
2025-09-28T09:23:22.555+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T09:23:22.556+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T09:23:22.586+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 30ms
2025-09-28T09:23:22.599+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T09:23:22.600+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:23:22.600+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:23:22.601+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.i.AuthHandshakeInterceptor       : id为1，设备为pc，token为pc，权限为manager的管理员成功加入会话,是此管理员这次连接的第一个连接者
2025-09-28T09:23:22.648+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTE0MDI1NTYsImV4cCI6MTc1OTAyMzA4MiwianRpIjoiMTMwZDkxMTQtNjg5Mi00ZjFhLTg3YzItYjIzODMxOTBmMDA1Iiwic3ViIjoiMSJ9.8rPj5aZMs7d4FGThXWnXJOPmglmtdzeWprHUb1dTuuo，设备是pc,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:23:22.669+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:23:22.670+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用pc建立连接，session编号是012bfd21-06c4-27fd-8e28-0ac516e51c33
2025-09-28T09:23:35.850+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T09:23:35.854+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:23:35.854+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:23:35.854+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T09:23:35.859+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTE0MDI1NTYsImV4cCI6MTc1OTAyMzA4MiwianRpIjoiMTMwZDkxMTQtNjg5Mi00ZjFhLTg3YzItYjIzODMxOTBmMDA1Iiwic3ViIjoiMSJ9.8rPj5aZMs7d4FGThXWnXJOPmglmtdzeWprHUb1dTuuo，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:23:35.860+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:23:35.861+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:23:35.861+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-9] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是3805946c-90a0-0a60-0733-c00bd81b66b6
2025-09-28T09:23:55.880+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:24:17.810+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:24:18.589+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.w.handler.ManagerWebSocketHandler  : 服务器讲编号为1的管理员的手机端改变状态以成功扫描用户的付款码，进行充值
2025-09-28T09:29:26.608+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : 1的phone发来信息
2025-09-28T09:29:26.609+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在phone端发起停止连接请求
2025-09-28T09:29:26.609+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员的phone客户端关闭连接，状态码为3
2025-09-28T09:29:26.610+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员，令服务器给pc端发送信息：1管理员的phone客户端已正常断开连接，关闭所有当前连接中的设备
2025-09-28T09:29:26.612+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:29:26.615+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的pc设备已断开连接
2025-09-28T09:29:26.618+08:00 ERROR 31632 --- [LibrarySystem] [http-nio-8080-exec-2] w.s.h.ExceptionWebSocketHandlerDecorator : Closing session due to exception for StandardWebSocketSession[id=3805946c-90a0-0a60-0733-c00bd81b66b6, uri=ws://localhost:8080/manager/connect?connectToken=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTE0MDI1NTYsImV4cCI6MTc1OTAyMzA4MiwianRpIjoiMTMwZDkxMTQtNjg5Mi00ZjFhLTg3YzItYjIzODMxOTBmMDA1Iiwic3ViIjoiMSJ9.8rPj5aZMs7d4FGThXWnXJOPmglmtdzeWprHUb1dTuuo&device=phone]

java.util.ConcurrentModificationException: null
	at java.base/java.util.HashMap$HashIterator.nextNode(HashMap.java:1605) ~[na:na]
	at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:1638) ~[na:na]
	at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:1636) ~[na:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.closeAllSession(ManagerWebSocketHandler.java:196) ~[classes/:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.handleMessage(ManagerWebSocketHandler.java:120) ~[classes/:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.handleTextMessage(ManagerWebSocketHandler.java:102) ~[classes/:na]
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-09-28T09:29:26.641+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-2] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T09:29:46.369+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:29:46.370+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:29:46.371+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 2ms
2025-09-28T09:29:51.416+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行开始: ManagerController.checkIsManager()
2025-09-28T09:29:51.416+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 正在验证是否有管理员1的权限
2025-09-28T09:29:51.417+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.controller.ManagerController       : 执行成功: ManagerController.checkIsManager() - 耗时: 1ms
2025-09-28T09:29:54.556+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T09:29:54.556+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T09:29:54.558+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-8] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 2ms
2025-09-28T09:29:54.565+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T09:29:54.566+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:29:54.566+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:29:54.566+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.i.AuthHandshakeInterceptor       : id为1，设备为pc，token为pc，权限为manager的管理员成功加入会话,是此管理员这次连接的第一个连接者
2025-09-28T09:29:54.571+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTE3OTQ1NTYsImV4cCI6MTc1OTAyMzQ3NCwianRpIjoiM2QwNWQ0M2ItZGU1Ny00MzRjLTlkODMtYTI1MWI1M2MyYzZlIiwic3ViIjoiMSJ9.3yG9-xayUOr8dxqyRTwdW6JjM3vQb-fUuLfXS_tb0uk，设备是pc,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:29:54.572+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:29:54.572+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用pc建立连接，session编号是99dc82f8-e903-3a0f-0c6f-63a3ed04ffb1
2025-09-28T09:30:14.264+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T09:30:14.265+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:30:14.266+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:30:14.266+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T09:30:14.272+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTE3OTQ1NTYsImV4cCI6MTc1OTAyMzQ3NCwianRpIjoiM2QwNWQ0M2ItZGU1Ny00MzRjLTlkODMtYTI1MWI1M2MyYzZlIiwic3ViIjoiMSJ9.3yG9-xayUOr8dxqyRTwdW6JjM3vQb-fUuLfXS_tb0uk，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:30:14.272+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:30:14.273+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:30:14.273+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是8cf267a3-efe2-8c53-2d3d-de91784cd0fe
2025-09-28T09:30:38.616+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:31:04.676+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:31:04.676+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : 服务器讲编号为1的管理员的手机端改变状态以成功扫描用户的付款码，进行充值
2025-09-28T09:31:51.352+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.controller.UserController          : 执行开始: UserController.getPayQrToken()
2025-09-28T09:31:51.353+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.controller.UserController          : 编号为3的用户请求获取他的支付码，支付金额为5.0元
2025-09-28T09:31:51.363+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.controller.UserController          : 执行成功: UserController.getPayQrToken() - 耗时: 10ms
2025-09-28T09:32:03.823+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 1的phone发来信息
2025-09-28T09:33:34.196+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在phone端发送了扫描到的付款吗信息，检测是否合法,当前应对的使用户开通借阅服务功能
2025-09-28T09:33:42.929+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员正在处理来自编号为3用户的目的为开通借阅服务，金额大小为5.0的订单
2025-09-28T09:33:47.184+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-6] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在处理来自编号为3用户的目的为充值服务，金额大小为5.0的订单时，发现其开通服务的类型存在异常
2025-09-28T09:34:09.054+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:34:09.055+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在pc端发起停止连接请求
2025-09-28T09:34:09.056+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员的pc客户端关闭连接，状态码为3
2025-09-28T09:34:09.056+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员，令服务器给pc端发送信息：1管理员的pc客户端已正常断开连接，关闭所有当前连接中的设备
2025-09-28T09:34:09.057+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:34:09.057+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的pc设备已断开连接
2025-09-28T09:34:09.058+08:00 ERROR 31632 --- [LibrarySystem] [http-nio-8080-exec-10] w.s.h.ExceptionWebSocketHandlerDecorator : Closing session due to exception for StandardWebSocketSession[id=99dc82f8-e903-3a0f-0c6f-63a3ed04ffb1, uri=ws://localhost:8080/manager/connect?connectToken=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTE3OTQ1NTYsImV4cCI6MTc1OTAyMzQ3NCwianRpIjoiM2QwNWQ0M2ItZGU1Ny00MzRjLTlkODMtYTI1MWI1M2MyYzZlIiwic3ViIjoiMSJ9.3yG9-xayUOr8dxqyRTwdW6JjM3vQb-fUuLfXS_tb0uk&device=pc]

java.util.ConcurrentModificationException: null
	at java.base/java.util.HashMap$HashIterator.nextNode(HashMap.java:1605) ~[na:na]
	at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:1638) ~[na:na]
	at java.base/java.util.HashMap$EntryIterator.next(HashMap.java:1636) ~[na:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.closeAllSession(ManagerWebSocketHandler.java:196) ~[classes/:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.handleMessage(ManagerWebSocketHandler.java:120) ~[classes/:na]
	at org.powernode.springboot.websocket.handler.ManagerWebSocketHandler.handleTextMessage(ManagerWebSocketHandler.java:102) ~[classes/:na]
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81) ~[spring-websocket-6.2.9.jar:6.2.9]
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:389) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:483) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:283) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:129) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152) ~[tomcat-embed-websocket-10.1.43.jar:10.1.43]
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.43.jar:10.1.43]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-09-28T09:34:09.401+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 1的phone发来信息
2025-09-28T09:34:09.401+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在phone端发起停止连接请求
2025-09-28T09:34:09.401+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员的phone客户端关闭连接，状态码为3
2025-09-28T09:34:09.401+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员，令服务器给phone端发送信息：1管理员的phone客户端已正常断开连接，关闭所有当前连接中的设备
2025-09-28T09:34:09.402+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:34:09.402+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T09:36:24.748+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行开始: ManagerController.generateQrToken()
2025-09-28T09:36:24.748+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 编号为1的管理员正在获取websocket连接的token
2025-09-28T09:36:24.749+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-4] o.p.s.controller.ManagerController       : 执行成功: ManagerController.generateQrToken() - 耗时: 1ms
2025-09-28T09:36:24.766+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.i.AuthHandshakeInterceptor       : 设备pc正在发送连接请求
2025-09-28T09:36:24.769+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:36:24.769+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:36:24.769+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.i.AuthHandshakeInterceptor       : id为1，设备为pc，token为pc，权限为manager的管理员成功加入会话,是此管理员这次连接的第一个连接者
2025-09-28T09:36:24.773+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTIxODQ3NDgsImV4cCI6MTc1OTAyMzg2NCwianRpIjoiZTkyYTdjYjMtOTBjZi00MWJhLWEzY2YtNGU1NWJmNTg3NWQ0Iiwic3ViIjoiMSJ9.VDnwWfmnZbjGfpWWYrQvltL6e40Kkb6NnOQeuqaHw1c，设备是pc,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:36:24.774+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:36:24.774+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用pc建立连接，session编号是bf0a8a8d-5aae-d45f-b535-07bdfbc7ad4b
2025-09-28T09:36:43.252+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 设备phone正在发送连接请求
2025-09-28T09:36:43.254+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 解析出来的token的设备是pc
2025-09-28T09:36:43.254+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 握手阶段检测出当前管理员id为1，设备为pc，权限为manager
2025-09-28T09:36:43.254+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.i.AuthHandshakeInterceptor       : 检出当前管理员存在过连接，使用的token相同,id为1，设备为phone，token为pc，权限为manager的管理员成功加入会话
2025-09-28T09:36:43.257+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : token是eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwicm9sZSI6Im1hbmFnZXIiLCJkZXZpY2UiOiJwYyIsInRpbWUiOjE3NTkwNTIxODQ3NDgsImV4cCI6MTc1OTAyMzg2NCwianRpIjoiZTkyYTdjYjMtOTBjZi00MWJhLWEzY2YtNGU1NWJmNTg3NWQ0Iiwic3ViIjoiMSJ9.VDnwWfmnZbjGfpWWYrQvltL6e40Kkb6NnOQeuqaHw1c，设备是phone,权限是manager，编号是1的管理员成功建立连接，现在开始再次验证信息,检测出token解析出来的设备是pc，权限是manager，编号是1
2025-09-28T09:36:43.259+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:36:43.260+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:36:43.260+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员已经使用phone建立连接，session编号是5d00b80f-d891-0c85-fb62-a9021cc4ae5a
2025-09-28T09:37:13.184+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : 1的pc发来信息
2025-09-28T09:37:13.186+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用pc发送信息成功
2025-09-28T09:37:13.186+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-7] o.p.s.w.handler.ManagerWebSocketHandler  : 服务器讲编号为1的管理员的手机端改变状态以成功扫描用户的付款码，进行充值
2025-09-28T09:37:33.602+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.UserController          : 执行开始: UserController.getPayQrToken()
2025-09-28T09:37:33.602+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.UserController          : 编号为3的用户请求获取他的支付码，支付金额为5.0元
2025-09-28T09:37:33.604+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-10] o.p.s.controller.UserController          : 执行成功: UserController.getPayQrToken() - 耗时: 2ms
2025-09-28T09:38:06.840+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 1的phone发来信息
2025-09-28T09:38:12.405+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员在phone端发送了扫描到的付款吗信息，检测是否合法，当前应对的使用户充值服务
2025-09-28T09:38:20.437+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员正在处理来自编号为3用户的目的为充值，金额大小为5.0的订单
2025-09-28T09:38:21.335+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Creating new transaction with name [org.powernode.springboot.service.database.service.impl.OrdersServiceImpl.insertOrders]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-09-28T09:38:21.341+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-28T09:38:23.801+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e61f4da
2025-09-28T09:38:23.807+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-28T09:38:23.834+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Acquired Connection [HikariProxyConnection@1156979198 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e61f4da] for JDBC transaction
2025-09-28T09:38:23.844+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Switching JDBC Connection [HikariProxyConnection@1156979198 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e61f4da] to manual commit
2025-09-28T09:38:23.849+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.s.d.s.impl.OrdersServiceImpl       : 执行开始: OrdersServiceImpl.insertOrders()
2025-09-28T09:38:23.910+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2025-09-28T09:38:24.048+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2700801a]
2025-09-28T09:38:24.104+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1156979198 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e61f4da] will be managed by Spring
2025-09-28T09:38:24.177+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.m.d.OrdersMapper.insertOrders      : ==>  Preparing: insert into orders(user_id,manager_id,money,back,purpose,time) values (?,?,?,false,?,?)
2025-09-28T09:38:24.484+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.m.d.OrdersMapper.insertOrders      : ==> Parameters: 3(Long), 1(Long), 5.0(Double), 充值服务(String), 2025-09-28T09:38:19.060593300(LocalDateTime)
2025-09-28T09:38:24.591+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.m.d.OrdersMapper.insertOrders      : <==    Updates: 1
2025-09-28T09:38:24.603+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2700801a]
2025-09-28T09:38:24.604+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.s.d.s.impl.OrdersServiceImpl       : 执行成功: OrdersServiceImpl.insertOrders() - 耗时: 755ms
2025-09-28T09:38:24.606+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2700801a]
2025-09-28T09:38:24.614+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2700801a]
2025-09-28T09:38:24.615+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2700801a]
2025-09-28T09:38:24.616+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Initiating transaction commit
2025-09-28T09:38:24.618+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Committing JDBC transaction on Connection [HikariProxyConnection@1156979198 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e61f4da]
2025-09-28T09:38:24.655+08:00 DEBUG 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.s.jdbc.support.JdbcTransactionManager  : Releasing JDBC Connection [HikariProxyConnection@1156979198 wrapping com.mysql.cj.jdbc.ConnectionImpl@1e61f4da] after transaction
2025-09-28T09:38:26.615+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : 编号为1的管理员正在处理编号为3用户的目的为充值，金额大小为5.0的订单成功
2025-09-28T09:38:27.094+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-1] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员用phone发送信息成功
2025-09-28T09:45:57.648+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-5] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的pc设备已断开连接
2025-09-28T09:45:57.648+08:00  INFO 31632 --- [LibrarySystem] [http-nio-8080-exec-3] o.p.s.w.handler.ManagerWebSocketHandler  : id为1的管理员的phone设备已断开连接
2025-09-28T12:42:38.003+08:00  WARN 31632 --- [LibrarySystem] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2h56m43s993ms352µs600ns).
2025-09-28T12:43:05.878+08:00  INFO 31632 --- [LibrarySystem] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-28T12:43:05.890+08:00  INFO 31632 --- [LibrarySystem] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-28T12:43:05.938+08:00  INFO 31632 --- [LibrarySystem] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-28T12:43:05.952+08:00  INFO 31632 --- [LibrarySystem] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-28T13:17:49.498+08:00  INFO 29616 --- [LibrarySystem] [main] o.p.s.LibrarySystemApplicationTests      : Starting LibrarySystemApplicationTests using Java 21.0.7 with PID 29616 (started by lenovo in E:\ideaTry\LibrarySystem)
2025-09-28T13:17:49.567+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.p.s.LibrarySystemApplicationTests      : Running with Spring Boot v3.5.4, Spring v6.2.9
2025-09-28T13:17:49.567+08:00  INFO 29616 --- [LibrarySystem] [main] o.p.s.LibrarySystemApplicationTests      : The following 1 profile is active: "dev"
2025-09-28T13:17:50.512+08:00  INFO 29616 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-28T13:17:50.619+08:00  INFO 29616 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-28T13:17:50.684+08:00  INFO 29616 --- [LibrarySystem] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
2025-09-28T13:17:50.840+08:00 DEBUG 29616 --- [LibrarySystem] [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2025-09-28T13:17:50.844+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Ignored because not a concrete top-level class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BalanceNotEnoughError.class]
2025-09-28T13:17:50.844+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BookMapper.class]
2025-09-28T13:17:50.845+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BooksMapper.class]
2025-09-28T13:17:50.845+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\BorrowTimeMapper.class]
2025-09-28T13:17:50.845+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ManagerMapper.class]
2025-09-28T13:17:50.845+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\OrdersMapper.class]
2025-09-28T13:17:50.845+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ProcessBookMapper.class]
2025-09-28T13:17:50.845+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\PurchaseBooksMapper.class]
2025-09-28T13:17:50.845+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\ScoreMapper.class]
2025-09-28T13:17:50.845+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [E:\ideaTry\LibrarySystem\target\classes\org\powernode\springboot\mapper\database\UserMapper.class]
2025-09-28T13:17:50.847+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'bookMapper' and 'org.powernode.springboot.mapper.database.BookMapper' mapperInterface
2025-09-28T13:17:50.850+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'bookMapper'.
2025-09-28T13:17:50.850+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'booksMapper' and 'org.powernode.springboot.mapper.database.BooksMapper' mapperInterface
2025-09-28T13:17:50.851+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'booksMapper'.
2025-09-28T13:17:50.851+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'borrowTimeMapper' and 'org.powernode.springboot.mapper.database.BorrowTimeMapper' mapperInterface
2025-09-28T13:17:50.851+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'borrowTimeMapper'.
2025-09-28T13:17:50.852+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'managerMapper' and 'org.powernode.springboot.mapper.database.ManagerMapper' mapperInterface
2025-09-28T13:17:50.852+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'managerMapper'.
2025-09-28T13:17:50.852+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'ordersMapper' and 'org.powernode.springboot.mapper.database.OrdersMapper' mapperInterface
2025-09-28T13:17:50.853+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'ordersMapper'.
2025-09-28T13:17:50.853+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'processBookMapper' and 'org.powernode.springboot.mapper.database.ProcessBookMapper' mapperInterface
2025-09-28T13:17:50.853+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'processBookMapper'.
2025-09-28T13:17:50.853+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'purchaseBooksMapper' and 'org.powernode.springboot.mapper.database.PurchaseBooksMapper' mapperInterface
2025-09-28T13:17:50.855+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'purchaseBooksMapper'.
2025-09-28T13:17:50.855+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'scoreMapper' and 'org.powernode.springboot.mapper.database.ScoreMapper' mapperInterface
2025-09-28T13:17:50.855+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'scoreMapper'.
2025-09-28T13:17:50.856+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'org.powernode.springboot.mapper.database.UserMapper' mapperInterface
2025-09-28T13:17:50.856+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.m.s.mapper.ClassPathMapperScanner      : Enabling autowire by type for MapperFactoryBean with name 'userMapper'.
2025-09-28T13:17:52.068+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BookMapper.xml]'
2025-09-28T13:17:52.106+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BooksMapper.xml]'
2025-09-28T13:17:52.127+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\BorrowTimeMapper.xml]'
2025-09-28T13:17:52.142+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ManagerMapper.xml]'
2025-09-28T13:17:52.168+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\OrdersMapper.xml]'
2025-09-28T13:17:52.195+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ProcessBookMapper.xml]'
2025-09-28T13:17:52.236+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\PurchaseBooksMapper.xml]'
2025-09-28T13:17:52.246+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\ScoreMapper.xml]'
2025-09-28T13:17:52.282+08:00 DEBUG 29616 --- [LibrarySystem] [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [E:\ideaTry\LibrarySystem\target\classes\mapper\UserMapper.xml]'
2025-09-28T13:17:53.349+08:00  WARN 29616 --- [LibrarySystem] [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 437c96c8-c01d-4592-971c-e1569ad58b73

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-09-28T13:17:53.362+08:00  INFO 29616 --- [LibrarySystem] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-09-28T13:17:55.052+08:00  INFO 29616 --- [LibrarySystem] [main] o.p.s.LibrarySystemApplicationTests      : Started LibrarySystemApplicationTests in 5.912 seconds (process running for 7.106)
